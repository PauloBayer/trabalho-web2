<body>
  <div class="d-flex flex-wrap">

    <form (ngSubmit)="onSubmit()" class="nav-filter" [formGroup]="form">
      <h1 class="text-white text-center">Relatório de Receita</h1>
      <div class="d-flex align-items-center flex-wrap p-3">
        <div class="w-50 p-3">
          <mat-form-field class="w-100">
            <mat-label>Categorias</mat-label>
            <mat-select formControlName="categoria">
              @for (categoria of categorias; track categoria) {
              <mat-option [value]="categoria.name">{{ categoria.name }}</mat-option>
              }
            </mat-select>
          </mat-form-field>
        </div>

        <div class="w-50 p-3">
          <mat-form-field formGroupName="data" class="w-100">
            <mat-label>Data para Relatório</mat-label>
            <mat-date-range-input [rangePicker]="picker">
              <input matStartDate placeholder="Data inicial">
              <input matEndDate placeholder="Data final">
            </mat-date-range-input>
            <mat-hint class="text-white">DD/MM/YYYY - DD/MM/YYYY</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>
          </mat-form-field>
        </div>

        <div class="w-100 d-flex justify-content-between">
          <div class="pl-3">
            <button class="btn" type="submit">Gerar Relatório</button>
          </div>
          <div class="pr-3">
            <button class="btn" [disabled]="receitas.length === 0" (click)="printReport()">
              Imprimir Relatório
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>

  <div class="relatorios">
    <table *ngIf="receitas.length > 0" class="black-box">
      <thead>
        <tr>
          <th class="data-header">Data</th>
          <th class="valor-header">Receita</th>
        </tr>
      </thead>
      <tbody class="table-body">
        <tr *ngFor="let receita of receitas">
          <td class="data-col">{{ receita.data | date }}</td>
          <td class="categoria-col">{{ receita.categoria }}</td>
          <td class="valor-col">{{ receita.valor | currency }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="receitas.length === 0">
    <p>Nenhuma receita encontrada para o período selecionado.</p>
  </div>
</body>